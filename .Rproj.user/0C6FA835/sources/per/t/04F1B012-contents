---
title: "NYCOpenData"
output: html_document
---

```{r setup, include=FALSE}

library(tidyverse)
library(utils)
library(rvest)
library(stringi)
library(jsonlite)
library(geoclient)

knitr::opts_chunk$set(echo = TRUE)

geoclient_api_key(key = "1f02b4033c75431bbba245d5e8015a93")
```


```{r}
openstreets <- read.csv("https://data.cityofnewyork.us/api/views/uiay-nctu/rows.csv?accessType=DOWNLOAD") %>% 
  mutate(id = row_number(),
         Borough = tolower(Borough))
```

```{r}
count(openstreets, Borough)

```

```{r}

intersections <- openstreets %>% 
  mutate(geo_from = geo_intersection(cross_street_1 = On.Street,
                        cross_street_2 = From.Street,
                        borough = Borough),
         lat_from = geo_from$latitude,
         long_from = geo_from$longitude,
         geo_to = geo_intersection(cross_street_1 = On.Street,
                        cross_street_2 = To.Street,
                        borough = Borough),
         lat_to = geo_to$latitude,
         long_to = geo_to$longitude) %>% 
  select(-geo_from, -geo_to)


```


